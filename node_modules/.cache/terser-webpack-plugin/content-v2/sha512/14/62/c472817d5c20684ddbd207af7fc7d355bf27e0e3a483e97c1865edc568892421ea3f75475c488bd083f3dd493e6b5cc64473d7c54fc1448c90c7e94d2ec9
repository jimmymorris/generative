{"code":"!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&n&&\"string\"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){n(1)},function(t,e,n){(function(e){var n;n=function(){function t(t,e){return t(e={exports:{}},e.exports),e.exports}function n(){return\"undefined\"!=typeof window&&window[\"canvas-sketch-cli\"]}function i(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function r(){return\"undefined\"!=typeof document}function o(t,e){return void 0===e&&(e={}),new Promise(function(i){e=P({},A,e);var r=p(Object.assign({},e,{extension:\"\",frame:void 0})),o=t?\"streamStart\":\"streamEnd\",s=n();return s&&s.output&&\"function\"==typeof s[o]?s[o](P({},e,{filename:r})).then(function(t){return i(t)}):i({filename:r,client:!1})})}function s(t,e){return void 0===e&&(e={}),function(t){return new Promise(function(e){var n=t.indexOf(\",\");if(-1!==n){for(var i=t.slice(n+1),r=window.atob(i),o=t.slice(0,n),s=/data:([^;]+)/.exec(o),a=(s?s[1]:\"\")||void 0,p=new ArrayBuffer(r.length),c=new Uint8Array(p),u=0;u<r.length;u++)c[u]=r.charCodeAt(u);e(new window.Blob([p],{type:a}))}else e(new window.Blob)})}(t).then(function(t){return a(t,e)})}function a(t,e){return void 0===e&&(e={}),new Promise(function(i){var r=(e=P({},A,e)).filename,o=n();return o&&\"function\"==typeof o.saveBlob&&o.output?o.saveBlob(t,P({},e,{filename:r})).then(function(t){return i(t)}):(v||((v=document.createElement(\"a\")).style.visibility=\"hidden\",v.target=\"_blank\"),v.download=r,v.href=window.URL.createObjectURL(t),document.body.appendChild(v),v.onclick=function(){v.onclick=H,setTimeout(function(){window.URL.revokeObjectURL(t),v.parentElement&&v.parentElement.removeChild(v),v.removeAttribute(\"href\"),i({filename:r,client:!1})})},void v.click())})}function p(t){if(void 0===t&&(t={}),\"function\"==typeof(t=P({},t)).file)return t.file(t);if(t.file)return t.file;var e,n=null,i=\"\";(\"string\"==typeof t.extension&&(i=t.extension),\"number\"==typeof t.frame)&&(e=\"number\"==typeof t.totalFrames?t.totalFrames:w(1e3,t.frame),n=N(t.frame+\"\",(e+\"\").length,\"0\"));var r=isFinite(t.totalLayers)&&isFinite(t.layer)&&1<t.totalLayers?\"\"+t.layer:\"\";if(null!=n)return[r,n].filter(Boolean).join(\"-\")+i;var o=t.timeStamp;return[t.prefix,t.name||o,r,t.hash,t.suffix].filter(Boolean).join(\"-\")+i}function c(t,e,n,i){return void 0===e&&(e=\"px\"),void 0===n&&(n=\"px\"),void 0===i&&(i=72),K(t,e,n,{pixelsPerInch:i,precision:4,roundPixel:!0})}function u(t,e){var n,o,s,a,p,u,h=Math.min,f=r(),l=e.dimensions,d=function(t){return!!t.dimensions&&(\"string\"==typeof t.dimensions||Array.isArray(t.dimensions)&&2<=t.dimensions.length)}(e),m=t.exporting,y=!!d&&!1!==e.scaleToFit,g=!(!m&&d)||e.scaleToView;f||(y=g=!1);var v,b,_=e.units,k=\"number\"==typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,T=i(e.bleed,0),P=f?window.devicePixelRatio:1,j=g?P:1;\"number\"==typeof e.pixelRatio&&isFinite(e.pixelRatio)?(v=e.pixelRatio,b=i(e.exportPixelRatio,v)):d?(v=j,b=i(e.exportPixelRatio,1)):(v=P,b=i(e.exportPixelRatio,v)),\"number\"==typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(v=h(e.maxPixelRatio,v)),m&&(v=b);var R,E,F=function(t,e){if(!r())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var i=n.getBoundingClientRect();return[i.width,i.height]}(0,e),C=F[0],O=F[1];if(d){var S=function(t,e,n){if(void 0===e&&(e=\"px\"),void 0===n&&(n=72),\"string\"==typeof t){var i=t.toLowerCase();if(!(i in W))throw new Error('The dimension preset \"'+t+'\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var r=W[i];return r.dimensions.map(function(t){return c(t,r.units,e,n)})}return t}(l,_,k),M=w(S[0],S[1]),D=h(S[0],S[1]);if(e.orientation){var N=\"landscape\"===e.orientation;n=N?M:D,o=N?D:M}else n=S[0],o=S[1];R=n,E=o,n+=2*T,o+=2*T}else R=n=C,E=o=O;var H=n,A=o;if(d&&_&&(H=c(n,_,\"px\",k),A=c(o,_,\"px\",k)),s=x(H),a=x(A),y&&!m&&d){var z=n/o,L=i(e.scaleToFitPadding,40),I=x(C-2*L),U=x(O-2*L);(s>I||a>U)&&(C/O>z?s=x((a=U)*z):a=x((s=I)/z))}return{bleed:T,pixelRatio:v,width:n,height:o,dimensions:[n,o],units:_||\"px\",scaleX:(p=x(g?v*s:v*H))/n,scaleY:(u=x(g?v*a:v*A))/o,pixelsPerInch:k,viewportWidth:x(g?s:H),viewportHeight:x(g?a:A),canvasWidth:p,canvasHeight:u,trimWidth:R,trimHeight:E,styleWidth:s,styleHeight:a}}function h(){if(!r())throw new Error(\"It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.\");return document.createElement(\"canvas\")}function f(t){void 0===t&&(t={});var e,n,i=!1;if(!1!==t.canvas){if(!(e=t.context)||\"string\"==typeof e){var r=t.canvas;r||(r=h(),i=!0);var o=e||\"2d\";if(\"function\"!=typeof r.getContext)throw new Error(\"The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?\");if(!(e=G(o,P({},t.attributes,{canvas:r}))))throw new Error(\"Failed at canvas.getContext('\"+o+\"') - the browser may not support this context, or a different context may already be in use with this canvas.\")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error(\"The { canvas } and { context } settings must point to the same underlying canvas element\");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style[\"image-rendering\"]=\"pixelated\")}return{canvas:n,context:e,ownsCanvas:i}}function l(){var t=n();return t&&t.hot}function d(t){var e=n();if(e)return e[Z]=e[Z]||{},e[Z][t]}function m(t,e){var i=n();i&&(i[Z]=i[Z]||{},i[Z][t]=e)}function y(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&\"string\"!=typeof e.context)throw new Error('In { p5 } mode, you can\\'t pass your own canvas or context, unless the context is a \"webgl\" or \"2d\" string');var n=\"string\"==typeof e.context&&e.context;e=Object.assign({},e,{canvas:!1,context:n})}var r,o=l();o&&(r=i(e.id,\"$__DEFAULT_CANVAS_SKETCH_ID__$\"));var s=o&&\"string\"==typeof r;s&&V.includes(r)&&(console.warn(\"Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. \",r),s=!1);var a=Promise.resolve();if(s){V.push(r);var p=d(r);if(p){var c=function(){var t=function(t,e){return e.animate?{time:t.props.time}:void 0}(p.manager,e);return p.manager.destroy(),t};a=p.load.then(c).catch(c)}}return a.then(function(n){var i,o=new Q;return t?(e=Object.assign({},e,n),o.setup(e),o.mount(),i=o.loadAndRun(t)):i=Promise.resolve(o),s&&m(r,{load:i,manager:o}),i})}var g,v,w=Math.max,b=Math.floor,x=Math.round,_=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,P=function(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;10>n;n++)e[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(\"\"))return!1;var i={};return[\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\"].forEach(function(t){i[t]=t}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},i)).join(\"\")}catch(t){return!1}}()?Object.assign:function(t){for(var e,n,i=function(t){if(null==t)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(t)}(t),r=1;r<arguments.length;r++){for(var o in e=Object(arguments[r]))k.call(e,o)&&(i[o]=e[o]);if(_){n=_(e);for(var s=0;s<n.length;s++)T.call(e,n[s])&&(i[n[s]]=e[n[s]])}}return i},j=\"undefined\"==typeof window?void 0===e?\"undefined\"==typeof self?{}:self:e:window,R=j.performance&&j.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},E=function(t){return!!t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof t.then},F=function(t){return t&&\"object\"==typeof t&&(\"object\"==typeof window&&\"object\"==typeof window.Node?t instanceof window.Node:\"number\"==typeof t.nodeType&&\"string\"==typeof t.nodeName)},C=t(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports=\"function\"==typeof Object.keys?Object.keys:n).shim=n}),O=(C.shim,t(function(t,e){function n(t){return\"[object Arguments]\"==Object.prototype.toString.call(t)}function i(t){return t&&\"object\"==typeof t&&\"number\"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,\"callee\")&&!Object.prototype.propertyIsEnumerable.call(t,\"callee\")||!1}var r=\"[object Arguments]\"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:i).supported=n,e.unsupported=i})),S=(O.supported,O.unsupported,t(function(t){function e(t){return null==t}function n(t){return t&&\"object\"==typeof t&&\"number\"==typeof t.length&&\"function\"==typeof t.copy&&\"function\"==typeof t.slice&&!(0<t.length&&\"number\"!=typeof t[0])}function i(t,i,s){var a,p;if(e(t)||e(i))return!1;if(t.prototype!==i.prototype)return!1;if(O(t))return!!O(i)&&(t=r.call(t),i=r.call(i),o(t,i,s));if(n(t)){if(!n(i))return!1;if(t.length!==i.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==i[a])return!1;return!0}try{var c=C(t),u=C(i)}catch(t){return!1}if(c.length!=u.length)return!1;for(c.sort(),u.sort(),a=c.length-1;0<=a;a--)if(c[a]!=u[a])return!1;for(a=c.length-1;0<=a;a--)if(p=c[a],!o(t[p],i[p],s))return!1;return typeof t==typeof i}var r=Array.prototype.slice,o=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t&&e&&(\"object\"==typeof t||\"object\"==typeof e)?i(t,e,n):n.strict?t===e:t==e)}})),M=t(function(t){!function(){function e(t,e){for(t+=\"\",e=e||2;t.length<e;)t=\"0\"+t;return t}var n=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g,i=/\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,r=/[^-+\\dA-Z]/g;return function(o,s,a,p){var c=Math.abs;if(1!==arguments.length||\"string\"!==function(t){return null===t?\"null\":void 0===t?\"undefined\":\"object\"==typeof t?Array.isArray(t)?\"array\":{}.toString.call(t).slice(8,-1).toLowerCase():typeof t}(o)||/\\d/.test(o)||(s=o,o=void 0),(o=o||new Date)instanceof Date||(o=new Date(o)),isNaN(o))throw TypeError(\"Invalid date\");var u=(s=(n.masks[s]||s||n.masks.default)+\"\").slice(0,4);(\"UTC:\"===u||\"GMT:\"===u)&&(s=s.slice(4),a=!0,\"GMT:\"===u&&(p=!0));var h=a?\"getUTC\":\"get\",f=o[h+\"Date\"](),l=o[h+\"Day\"](),d=o[h+\"Month\"](),m=o[h+\"FullYear\"](),y=o[h+\"Hours\"](),g=o[h+\"Minutes\"](),v=o[h+\"Seconds\"](),w=o[h+\"Milliseconds\"](),_=a?0:o.getTimezoneOffset(),k=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var i=e.getTimezoneOffset()-n.getTimezoneOffset();return e.setHours(e.getHours()-i),1+b((e-n)/6048e5)}(o),T=function(t){var e=t.getDay();return 0===e&&(e=7),e}(o),P={d:f,dd:e(f),ddd:n.i18n.dayNames[l],dddd:n.i18n.dayNames[l+7],m:d+1,mm:e(d+1),mmm:n.i18n.monthNames[d],mmmm:n.i18n.monthNames[d+12],yy:(m+\"\").slice(2),yyyy:m,h:y%12||12,hh:e(y%12||12),H:y,HH:e(y),M:g,MM:e(g),s:v,ss:e(v),l:e(w,3),L:e(x(w/10)),t:12>y?n.i18n.timeNames[0]:n.i18n.timeNames[1],tt:12>y?n.i18n.timeNames[2]:n.i18n.timeNames[3],T:12>y?n.i18n.timeNames[4]:n.i18n.timeNames[5],TT:12>y?n.i18n.timeNames[6]:n.i18n.timeNames[7],Z:p?\"GMT\":a?\"UTC\":((o+\"\").match(i)||[\"\"]).pop().replace(r,\"\"),o:(0<_?\"-\":\"+\")+e(100*b(c(_)/60)+c(_)%60,4),S:[\"th\",\"st\",\"nd\",\"rd\"][3<f%10?0:(10!=f%100-f%10)*f%10],W:k,N:T};return s.replace(t,function(t){return t in P?P[t]:t.slice(1,t.length-1)})}}();n.masks={default:\"ddd mmm dd yyyy HH:MM:ss\",shortDate:\"m/d/yy\",mediumDate:\"mmm d, yyyy\",longDate:\"mmmm d, yyyy\",fullDate:\"dddd, mmmm d, yyyy\",shortTime:\"h:MM TT\",mediumTime:\"h:MM:ss TT\",longTime:\"h:MM:ss TT Z\",isoDate:\"yyyy-mm-dd\",isoTime:\"HH:MM:ss\",isoDateTime:\"yyyy-mm-dd'T'HH:MM:sso\",isoUtcDateTime:\"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\",expiresHeaderFormat:\"ddd, dd mmm yyyy HH:MM:ss Z\"},n.i18n={dayNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],monthNames:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],timeNames:[\"a\",\"p\",\"am\",\"pm\",\"A\",\"P\",\"AM\",\"PM\"]},t.exports=n}()}),D=\"\",N=function(t,e,n){return t=t.toString(),void 0===e?t:function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"expected a string\");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(g!==t||void 0===g)g=t,D=\"\";else if(D.length>=n)return D.substr(0,n);for(;n>D.length&&1<e;)1&e&&(D+=t),e>>=1,t+=t;return D=(D+=t).substr(0,n)}(n=0===n?\"0\":n?n.toString():\" \",e-t.length)+t},H=function(){},A={extension:\"\",prefix:\"\",suffix:\"\"},z=[\"image/png\",\"image/jpeg\",\"image/webp\"],L={dimension:\"dimensions\",animated:\"animate\",animating:\"animate\",unit:\"units\",P5:\"p5\",pixellated:\"pixelated\",looping:\"loop\",pixelPerInch:\"pixels\"},I=[\"dimensions\",\"units\",\"pixelsPerInch\",\"orientation\",\"scaleToFit\",\"scaleToView\",\"bleed\",\"pixelRatio\",\"exportPixelRatio\",\"maxPixelRatio\",\"scaleContext\",\"resizeCanvas\",\"styleCanvas\",\"canvas\",\"context\",\"attributes\",\"parent\",\"file\",\"name\",\"prefix\",\"suffix\",\"animate\",\"playing\",\"loop\",\"duration\",\"totalFrames\",\"fps\",\"playbackRate\",\"timeScale\",\"frame\",\"time\",\"flush\",\"pixelated\",\"hotkeys\",\"p5\",\"id\",\"scaleToFitPadding\",\"data\",\"params\",\"encoding\",\"encodingQuality\"],U=function(t){Object.keys(t).forEach(function(t){if(t in L){var e=L[t];console.warn('[canvas-sketch] Could not recognize the setting \"'+t+'\", did you mean \"'+e+'\"?')}else I.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting \"'+t+'\"')})},W=[[\"postcard\",101.6,152.4],[\"poster-small\",280,430],[\"poster\",460,610],[\"poster-large\",610,910],[\"business-card\",50.8,88.9],[\"2r\",64,89],[\"3r\",89,127],[\"4r\",102,152],[\"5r\",127,178],[\"6r\",152,203],[\"8r\",203,254],[\"10r\",254,305],[\"11r\",279,356],[\"12r\",305,381],[\"a0\",841,1189],[\"a1\",594,841],[\"a2\",420,594],[\"a3\",297,420],[\"a4\",210,297],[\"a5\",148,210],[\"a6\",105,148],[\"a7\",74,105],[\"a8\",52,74],[\"a9\",37,52],[\"a10\",26,37],[\"2a0\",1189,1682],[\"4a0\",1682,2378],[\"b0\",1e3,1414],[\"b1\",707,1e3],[\"b1+\",720,1020],[\"b2\",500,707],[\"b2+\",520,720],[\"b3\",353,500],[\"b4\",250,353],[\"b5\",176,250],[\"b6\",125,176],[\"b7\",88,125],[\"b8\",62,88],[\"b9\",44,62],[\"b10\",31,44],[\"b11\",22,32],[\"b12\",16,22],[\"c0\",917,1297],[\"c1\",648,917],[\"c2\",458,648],[\"c3\",324,458],[\"c4\",229,324],[\"c5\",162,229],[\"c6\",114,162],[\"c7\",81,114],[\"c8\",57,81],[\"c9\",40,57],[\"c10\",28,40],[\"c11\",22,32],[\"c12\",16,22],[\"half-letter\",5.5,8.5,\"in\"],[\"letter\",8.5,11,\"in\"],[\"legal\",8.5,14,\"in\"],[\"junior-legal\",5,8,\"in\"],[\"ledger\",11,17,\"in\"],[\"tabloid\",11,17,\"in\"],[\"ansi-a\",8.5,11,\"in\"],[\"ansi-b\",11,17,\"in\"],[\"ansi-c\",17,22,\"in\"],[\"ansi-d\",22,34,\"in\"],[\"ansi-e\",34,44,\"in\"],[\"arch-a\",9,12,\"in\"],[\"arch-b\",12,18,\"in\"],[\"arch-c\",18,24,\"in\"],[\"arch-d\",24,36,\"in\"],[\"arch-e\",36,48,\"in\"],[\"arch-e1\",30,42,\"in\"],[\"arch-e2\",26,38,\"in\"],[\"arch-e3\",27,39,\"in\"]].reduce(function(t,e){var n={units:e[3]||\"mm\",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g,\" \")]=n,t},{}),B=[\"mm\",\"cm\",\"m\",\"pc\",\"pt\",\"in\",\"ft\",\"px\"],Y={m:{system:\"metric\",factor:1},cm:{system:\"metric\",factor:.01},mm:{system:\"metric\",factor:.001},pt:{system:\"imperial\",factor:1/72},pc:{system:\"imperial\",factor:1/6},in:{system:\"imperial\",factor:1},ft:{system:\"imperial\",factor:12}};\n/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/const q={metric:{unit:\"m\",ratio:1/.0254},imperial:{unit:\"in\",ratio:.0254}};var K=function(t,e,n,i){if(\"number\"!=typeof t||!isFinite(t))throw new Error(\"Value must be a finite number\");if(!e||!n)throw new Error(\"Must specify from and to units\");var r=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}((i=i||{}).pixelsPerInch,96),o=i.precision,s=!1!==i.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===B.indexOf(e))throw new Error('Invalid from unit \"'+e+'\", must be one of: '+B.join(\", \"));if(-1===B.indexOf(n))throw new Error('Invalid from unit \"'+n+'\", must be one of: '+B.join(\", \"));if(e===n)return t;var a=1,p=1,c=!1;\"px\"===e&&(p=1/r,e=\"in\"),\"px\"===n&&(c=!0,a=r,n=\"in\");var u=Y[e],h=Y[n],f=t*u.factor*p;u.system!==h.system&&(f*=q[u.system].ratio);var l=f/h.factor*a;return c&&s?l=x(l):\"number\"==typeof o&&isFinite(o)&&(l=function(t,e){return+(x(t+\"e\"+e)+\"e-\"+e)}(l,o)),l};K.units=B;var G=function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"must specify type string\");if(e=e||{},\"undefined\"==typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement(\"canvas\");\"number\"==typeof e.width&&(n.width=e.width),\"number\"==typeof e.height&&(n.height=e.height);var i,r=e;try{var o=[t];0===t.indexOf(\"webgl\")&&o.push(\"experimental-\"+t);for(var s=0;s<o.length;s++)if(i=n.getContext(o[s],r))return i}catch(e){i=null}return i||null},Q=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var i=n();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):i&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener(\"keydown\",e)},detach:function(){window.removeEventListener(\"keydown\",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():!t.props.recording&&t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},J={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};J.sketch.get=function(){return this._sketch},J.settings.get=function(){return this._settings},J.props.get=function(){return this._props},Q.prototype._computePlayhead=function(t,e){return\"number\"==typeof e&&isFinite(e)?t/e:0},Q.prototype._computeFrame=function(t,e,n,i){return isFinite(n)&&1<n?b(t*(n-1)):b(i*e)},Q.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},Q.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},Q.prototype.run=function(){if(!this.sketch)throw new Error(\"should wait until sketch is loaded before trying to play()\");return!1!==this.settings.playing&&this.play(),\"function\"==typeof this.sketch.dispose&&console.warn(\"In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()\"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},Q.prototype._cancelTimeouts=function(){null!=this._raf&&\"undefined\"!=typeof window&&\"function\"==typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},Q.prototype.play=function(){var t=this.settings.animate;return\"animation\"in this.settings&&(t=!0,console.warn(\"[canvas-sketch] { animation } has been renamed to { animate }\")),t?r()?void(this.props.playing||(!this.props.started&&(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=R(),this._raf=window.requestAnimationFrame(this._animateHandler))):void console.error(\"[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported\"):void 0},Q.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},Q.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},Q.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},Q.prototype.record=function(){var t=this;if(!this.props.recording){if(!r())return void console.error(\"[canvas-sketch] WARN: Recording from Node.js is not yet supported\");this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;this._cancelTimeouts();var i=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then(function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(i,0)):(console.log(\"Finished recording\"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&\"function\"==typeof this.sketch.beginRecord&&this._wrapContextScale(function(e){return t.sketch.beginRecord(e)}),function(t){return void 0===t&&(t={}),o(!0,t)}(e).catch(function(t){console.error(t)}).then(function(){t._raf=window.requestAnimationFrame(i)})}},Q.prototype._signalBegin=function(){var t=this;this.sketch&&\"function\"==typeof this.sketch.begin&&this._wrapContextScale(function(e){return t.sketch.begin(e)})},Q.prototype._signalEnd=function(){var t=this;this.sketch&&\"function\"==typeof this.sketch.end&&this._wrapContextScale(function(e){return t.sketch.end(e)})},Q.prototype.endRecord=function(){var t=this,e=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,function(t){return void 0===t&&(t={}),o(!1,t)}().catch(function(t){console.error(t)}).then(function(){e&&t.sketch&&\"function\"==typeof t.sketch.endRecord&&t._wrapContextScale(function(e){return t.sketch.endRecord(e)})})},Q.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||M(new Date,\"yyyy.mm.dd-HH.MM.ss\"),totalFrames:isFinite(this.props.totalFrames)?w(0,this.props.totalFrames):1e3}},Q.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);\"function\"==typeof this.sketch.preExport&&this.sketch.preExport();var i=this._createExportOptions(t),r=n(),o=Promise.resolve();if(r&&t.commit&&\"function\"==typeof r.commit){var s=P({},i),a=r.commit(s);o=E(a)?a:Promise.resolve(a)}return o.then(function(t){return e._doExportFrame(P({},i,{hash:t||\"\"}))}).then(function(t){return 1===t.length?t[0]:t})},Q.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render(),r=this.props.canvas;return void 0===n&&(n=[r]),n=(n=[].concat(n).filter(Boolean)).map(function(e){var n=\"object\"==typeof e&&e&&(\"data\"in e||\"dataURL\"in e),r=n?e.data:e,o=n?P({},e,{data:r}):{data:r};if(function(t){return F(t)&&/canvas/i.test(t.nodeName)&&\"function\"==typeof t.getContext}(r)){var s=function(t,e){void 0===e&&(e={});var n=e.encoding||\"image/png\";if(!z.includes(n))throw new Error(\"Invalid canvas encoding \"+n);var i=(n.split(\"/\")[1]||\"\").replace(/jpeg/i,\"jpg\");return i&&(i=(\".\"+i).toLowerCase()),{extension:i,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(r,{encoding:o.encoding||t.encoding,encodingQuality:i(o.encodingQuality,t.encodingQuality,.95)}),a=s.dataURL,p=s.extension,c=s.type;return Object.assign(o,{dataURL:a,extension:p,type:c})}return o}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map(function(e,n,i){var r=P({extension:\"\",prefix:\"\",suffix:\"\"},t,e,{layer:n,totalLayers:i.length}),o=!1!==t.save&&e.save;for(var c in r.save=!1!==o,r.filename=p(r),delete r.encoding,delete r.encodingQuality,r)void 0===r[c]&&delete r[c];var u=Promise.resolve({});if(r.save){var h=r.data;if(r.dataURL)u=s(r.dataURL,r);else u=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return a(new window.Blob(n,{type:e.type||\"\"}),e)}(h,r)}return u.then(function(t){return Object.assign({},r,t)})})).then(function(n){var i=n.filter(function(t){return t.save});if(0<i.length){var r,o=i.find(function(t){return t.outputName}),s=i.some(function(t){return t.client}),a=i.some(function(t){return t.stream});r=1<i.length?i.length:o?o.outputName+\"/\"+i[0].filename:\"\"+i[0].filename;var p=\"\";if(t.sequence)p=isFinite(e.props.totalFrames)?\" (frame \"+(t.frame+1)+\" / \"+e.props.totalFrames+\")\":\" (frame \"+t.frame+\")\";else 1<i.length&&(p=\" files\");var c=s?\"canvas-sketch-cli\":\"canvas-sketch\",u=a?\"Streaming into\":\"Exported\";console.log(\"%c[\"+c+\"]%c \"+u+\" %c\"+r+\"%c\"+p,\"color: #8e8e8e;\",\"color: initial;\",\"font-weight: bold;\",\"font-weight: initial;\")}return\"function\"==typeof e.sketch.postExport&&e.sketch.postExport(),n})},Q.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},Q.prototype._preRender=function(){var t=this.props;this.props.gl||!t.context||t.p5?t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio):(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY))},Q.prototype._postRender=function(){var t=this.props;this.props.gl||!t.context||t.p5||t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},Q.prototype.tick=function(){this.sketch&&\"function\"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},Q.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},Q.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),\"function\"==typeof this.sketch?t=this.sketch(e):\"function\"==typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},Q.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=[\"animate\"];Object.keys(t).forEach(function(t){if(0<=n.indexOf(t))throw new Error(\"Sorry, the { \"+t+\" } option is not yet supported with update().\")});var i=this._settings.canvas,r=this._settings.context;for(var o in t){var s=t[o];void 0!==s&&(e._settings[o]=s)}var a=Object.assign({},this._settings,t);if(\"time\"in t&&\"frame\"in t)throw new Error(\"You should specify { time } or { frame } but not both\");if(\"time\"in t?delete a.frame:\"frame\"in t&&delete a.time,\"duration\"in t&&\"totalFrames\"in t)throw new Error(\"You should specify { duration } or { totalFrames } but not both\");\"duration\"in t?delete a.totalFrames:\"totalFrames\"in t&&delete a.duration,\"data\"in t&&(this._props.data=t.data);var p=this.getTimeProps(a);if(Object.assign(this._props,p),i!==this._settings.canvas||r!==this._settings.context){var c=f(this._settings),u=c.canvas,h=c.context;this.props.canvas=u,this.props.context=h,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&\"function\"!=typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),\"playing\"in t&&(t.playing?this.play():this.pause()),U(this._settings),this.resize(),this.render(),this.props},Q.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,i=u(n,e);Object.assign(this._props,i);var o=this.props,s=o.pixelRatio,a=o.canvasWidth,p=o.canvasHeight,c=o.styleWidth,h=o.styleHeight,f=this.props.canvas;f&&!1!==e.resizeCanvas&&(n.p5?(f.width!==a||f.height!==p)&&(this._isP5Resizing=!0,n.p5.pixelDensity(s),n.p5.resizeCanvas(a/s,p/s,!1),this._isP5Resizing=!1):(f.width!==a&&(f.width=a),f.height!==p&&(f.height=p)),r()&&!1!==e.styleCanvas&&(f.style.width=c+\"px\",f.style.height=h+\"px\"));var l=this._getSizeProps(),d=!S(t,l);return d&&this._sizeChanged(),d},Q.prototype._sizeChanged=function(){this.sketch&&\"function\"==typeof this.sketch.resize&&this.sketch.resize(this.props)},Q.prototype.animate=function(){if(this.props.playing){if(!r())return void console.error(\"[canvas-sketch] WARN: Animation in Node.js is not yet supported\");this._raf=window.requestAnimationFrame(this._animateHandler);var t=R(),e=1e3/this.props.fps,n=t-this._lastTime,i=this.props.duration,o=\"number\"==typeof i&&isFinite(i),s=!0,a=this.settings.playbackRate;\"fixed\"===a?n=e:\"throttle\"===a?n>e?(t-=n%e,this._lastTime=t):s=!1:this._lastTime=t;var p=n/1e3,c=this.props.time+p*this.props.timeScale;0>c&&o&&(c=i+c);var u=!1,h=!1,f=!1!==this.settings.loop;if(o&&c>=i&&(f?(s=!0,c%=i,h=!0):(s=!1,c=i,u=!0),this._signalEnd()),s){this.props.deltaTime=p,this.props.time=c,this.props.playhead=this._computePlayhead(c,i);var l=this.props.frame;this.props.frame=this._computeCurrentFrame(),h&&this._signalBegin(),l!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}u&&this.pause()}},Q.prototype.dispatch=function(t){if(\"function\"!=typeof t)throw new Error(\"must pass function into dispatch()\");t(this.props),this.render()},Q.prototype.mount=function(){this._appendCanvasIfNeeded()},Q.prototype.unmount=function(){r()&&(window.removeEventListener(\"resize\",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},Q.prototype._appendCanvasIfNeeded=function(){r()&&!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas)},Q.prototype._setupGLKey=function(){var t;this.props.context&&(\"function\"==typeof(t=this.props.context).clear&&\"function\"==typeof t.clearColor&&\"function\"==typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},Q.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,r=i(t.timeScale,1),o=i(t.fps,24),s=\"number\"==typeof e&&isFinite(e),a=\"number\"==typeof n&&isFinite(n),p=s?b(o*e):void 0,c=a?n/o:void 0;if(s&&a&&p!==n)throw new Error(\"You should specify either duration or totalFrames, but not both. Or, they must match exactly.\");void 0===t.dimensions&&void 0!==t.units&&console.warn(\"You've specified a { units } setting but no { dimension }, so the units will be ignored.\"),n=i(n,p,1/0),e=i(e,c,1/0);var u=t.time,h=t.frame,f=\"number\"==typeof u&&isFinite(u),l=\"number\"==typeof h&&isFinite(h),d=0,m=0,y=0;if(f&&l)throw new Error(\"You should specify either start frame or time, but not both.\");return f?(d=u,y=this._computePlayhead(d,e),m=this._computeFrame(y,d,n,o)):l&&(d=(m=h)/o,y=this._computePlayhead(d,e)),{playhead:y,time:d,frame:m,duration:e,totalFrames:n,fps:o,timeScale:r}},Q.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error(\"Multiple setup() calls not yet supported.\");this._settings=Object.assign({},t,this._settings),U(this._settings);var n=f(this._settings),i=n.context,r=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:r,context:i,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},Q.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then(function(){return n.run(),n})},Q.prototype.unload=function(){var t=this;this.pause(),this.sketch&&(\"function\"==typeof this.sketch.unload&&this._wrapContextScale(function(e){return t.sketch.unload(e)}),this._sketch=null)},Q.prototype.destroy=function(){this.unload(),this.unmount()},Q.prototype.load=function(t,e){var n=this;if(\"function\"!=typeof t)throw new Error(\"The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)\");this.sketch&&this.unload(),void 0!==e&&this.update(e),this._preRender();var i=Promise.resolve();if(this.settings.p5){if(!r())throw new Error(\"[canvas-sketch] ERROR: Using p5.js in Node.js is not supported\");i=new Promise(function(t){var e,i=n.settings.p5;i.p5&&(e=i.preload,i=i.p5);var r=function(i){e&&(i.preload=function(){return e(i)}),i.setup=function(){var e=n.props,r=\"webgl\"===n.settings.context,o=r?i.WEBGL:i.P2D;i.noLoop(),i.pixelDensity(e.pixelRatio),i.createCanvas(e.viewportWidth,e.viewportHeight,o),r&&n.settings.attributes&&i.setAttributes(n.settings.attributes),n.update({p5:i,canvas:i.canvas,context:i._renderer.drawingContext}),t()}};if(\"function\"==typeof i)new i(r);else{if(\"function\"!=typeof window.createCanvas)throw new Error(\"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\");r(window)}})}return i.then(function(){var e=t(n.props);return E(e)||(e=Promise.resolve(e)),e}).then(function(t){return t||(t={}),n._sketch=t,r()&&(n._keyboardShortcuts.attach(),window.addEventListener(\"resize\",n._resizeHandler)),n._postRender(),n._sizeChanged(),n}).catch(function(t){throw console.warn(\"Could not start sketch, the async loading function rejected with an error:\\n    Error: \"+t.message),t})},Object.defineProperties(Q.prototype,J);var Z=\"hot-id-cache\",V=[];return y.canvasSketch=y,y.PaperSizes=W,y},t.exports=n()}).call(this,n(2))},function(t){var e=function(){return this}();try{e=e||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(e=window)}t.exports=e}]);","extractedComments":[]}